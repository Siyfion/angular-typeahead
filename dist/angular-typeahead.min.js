!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){"use strict";angular.module("siyfion.sfTypeahead",[]).value("$typeahead",function(a){a.typeahead.apply(a,Array.prototype.slice.call(arguments,1))}).directive("sfTypeahead",["$typeahead",function(a){return{restrict:"AC",require:"ngModel",scope:{datasets:"=",options:"=",allowCustom:"="},link:function(b,c,d,e){function f(){q=o?b.$watchCollection("datasets",g):b.$watch("datasets",g)}function g(a,b){if(!angular.equals(a,b)){var c=o;h(),o!==c&&(q(),f())}}function h(){if(null==b.datasets)throw new Error("The datasets parameter is mandatory!");if(m=b.options||{},o=angular.isArray(b.datasets),n=o?b.datasets:[b.datasets],p){var d=c.val();a(c,"destroy"),a(c,m,n),e.$setViewValue(d)}else a(c,m,n),b.$watch("options",h),p=!0}function i(a){for(var b in n){var c=n[b],d=c.displayKey||"value",e=(angular.isFunction(d)?d(a):a[d])||"";return e}}function j(){return void 0===b.allowCustom||!!b.allowCustom}function k(a){b.$apply(function(){e.$setViewValue(a)})}function l(a){c.bind(a,function(){b.$emit(a,Array.prototype.slice.call(arguments,1))})}var m,n,o,p=!1,q=null;h(),f(),e.$parsers.push(function(a){return angular.isObject(e.$modelValue)&&a===i(e.$modelValue)?e.$modelValue:j()||"string"!=typeof a?a:e.$modelValue}),e.$formatters.push(function(b){return angular.isObject(b)&&(b=i(b)),b?a(c,"val",b):a(c,"val",""),b}),c.bind("typeahead:select",function(a,c,d){k(c),b.$emit("typeahead:select",c,d)}),c.bind("typeahead:autocomplete",function(a,c,d){k(c),b.$emit("typeahead:autocomplete",c,d)}),l("typeahead:active"),l("typeahead:idle"),l("typeahead:open"),l("typeahead:close"),l("typeahead:change"),l("typeahead:render"),l("typeahead:cursorchange"),l("typeahead:asyncrequest"),l("typeahead:asynccancel"),l("typeahead:asyncreceive")}}}])});