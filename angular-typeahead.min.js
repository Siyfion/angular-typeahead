angular.module("siyfion.sfTypeahead",[]).directive("sfTypeahead",function(){return{restrict:"AC",scope:{value:"=ngModel",options:"=",datasets:"="},link:function(a,b){function c(a){var b=0;if(a=a[0],document.selection){var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else"number"==typeof a.selectionStart&&(b=a.selectionStart);return b}function d(a,b){if(a=a[0],document.selection){var c=a.createTextRange();c.move("character",b),c.select()}else"number"==typeof a.selectionStart&&(a.focus(),a.setSelectionRange(b,b))}function e(c,d){var e=b.val();a.$apply(function(){a.value=d}),b.val(e)}b.typeahead(a.options,a.datasets),b.bind("typeahead:selected",function(b,c,d){e(b,c,d),a.$emit("typeahead:selected")}),b.bind("typeahead:autocompleted",function(b,c,d){e(b,c,d),a.$emit("typeahead:autocompleted")}),b.bind("typeahead:opened",function(){a.$emit("typeahead:opened")}),b.bind("typeahead:closed",function(){a.$emit("typeahead:closed")}),b.bind("typeahead:cursorchanged",function(b,c,d){a.$emit("typeahead:cursorchanged",b,c,d)}),b.bind("input",function(){var e=c(b);a.$apply(function(){var c=b.val();a.value=c}),d(b,e)})}}});